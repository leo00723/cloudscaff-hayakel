<ng-container *ngIf="scaffold$ |async as scaffold">
  <app-header
    title="Scaffold - {{scaffold.code}}"
    [showMenu]="false"
    [showBack]="true"
    path="/dashboard/site/{{ids[0]}}-{{ids[1]}}"
  >
    <ion-toolbar>
      <ion-segment
        (ionChange)="segmentChanged($event)"
        selectOnFocus="true"
        [value]="active"
      >
        <ion-segment-button value="overview">
          <ion-label>Overview</ion-label>
        </ion-segment-button>
        <ion-segment-button value="inspections">
          <ion-label>Inspections</ion-label>
        </ion-segment-button>
      </ion-segment>
    </ion-toolbar>
  </app-header>

  <ion-content fullscreen="true" class="ion-padding">
    <ng-container [ngSwitch]="active" *ngIf="company$ | async as company">
      <div *ngSwitchDefault class="container card-outline">
        <ion-row class="p-2">
          <ion-col size="12">
            <h3>Overview</h3>
          </ion-col>
          <ion-col>
            <ion-label>
              <h6>Code:</h6>
              <h6>Date Issued:</h6>
              <h6>Start Date:</h6>
              <h6>End Date:</h6>
            </ion-label>
          </ion-col>
          <ion-col>
            <ion-label>
              <h6>{{ scaffold.code }}</h6>
              <h6>{{ scaffold.date | date }}</h6>
              <h6>{{ scaffold.startDate | date }}</h6>
              <h6>{{ scaffold.endDate | date }}</h6>
            </ion-label>
          </ion-col>

          <ion-col size="12" class="mt-3">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th class="text-center" scope="col">#</th>
                  <th scope="col">Description</th>
                  <th class="text-center" scope="col">Detail</th>
                  <th class="text-center" scope="col">Qty</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th class="text-center" scope="row">1</th>
                  <td colspan="3">
                    {{ company.terminology.scaffold }} Details
                  </td>
                </tr>
                <!-- SCAFFOLD -->
                <tr class="small">
                  <th class="text-center" scope="row"></th>
                  <td>{{ company.terminology.scaffold }}</td>
                  <td class="text-center">
                    {{ scaffold.scaffold.length }}{{ company.measurement.symbol
                    }} x {{ scaffold.scaffold.width }}{{
                    company.measurement.symbol }} x {{ scaffold.scaffold.height
                    }}{{ company.measurement.symbol }}
                  </td>
                  <td class="text-center">1</td>
                </tr>
                <!-- BOARDS -->
                <tr
                  class="small"
                  *ngFor="let item of scaffold.boards; let i = index"
                >
                  <th class="text-center" scope="row"></th>
                  <td>{{ company.terminology.boards }}</td>
                  <td class="text-center">
                    {{ item.length }}{{ company.measurement.symbol }} x {{
                    item.width }}{{ company.measurement.symbol }} - Height {{
                    item.height }}{{ company.measurement.symbol }}
                  </td>
                  <td class="text-center">{{ item.qty }}</td>
                </tr>
                <!-- HIRE -->
                <tr class="small">
                  <th class="text-center" scope="row"></th>
                  <td>{{ company.terminology.hire }}</td>
                  <td class="text-center">
                    {{ scaffold.hire.daysStanding }} days
                  </td>
                  <td class="text-center">1</td>
                </tr>
                <!-- LABOR -->
                <tr>
                  <th class="text-center" scope="row">2</th>
                  <td colspan="3">Labor</td>
                </tr>
                <tr
                  class="small"
                  *ngFor="let item of scaffold.labour; let i = index"
                >
                  <th class="text-center" scope="row"></th>
                  <td>{{ item.type.name }}</td>
                  <td class="text-center">{{ item.rate.name }}</td>
                  <td class="text-center">{{ item.qty }}</td>
                </tr>
                <!-- ADDITIONALS -->
                <tr>
                  <th class="text-center" scope="row">3</th>
                  <td colspan="3">Additionals</td>
                </tr>
                <tr
                  class="small"
                  *ngFor="let item of scaffold.additionals; let i = index"
                >
                  <th class="text-center" scope="row"></th>
                  <td colspan="2">{{ item.name }}</td>
                  <td class="text-center">{{ item.qty }}</td>
                </tr>
              </tbody>
            </table>
          </ion-col>
        </ion-row>
      </div>
      <div *ngSwitchCase="'inspections'"></div>
      <ng-template #loading>
        <div class="ion-padding">
          <app-skeleton-text></app-skeleton-text>
          <app-skeleton-text></app-skeleton-text>
          <app-skeleton-text></app-skeleton-text>
          <app-skeleton-text></app-skeleton-text>
        </div>
      </ng-template>
    </ng-container>
  </ion-content>
</ng-container>
