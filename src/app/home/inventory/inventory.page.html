<app-header title="Inventory" btnName="help" (updated)="help()">
  <ion-toolbar>
    <ion-segment
      scrollable
      (ionChange)="segmentChanged($event)"
      selectOnFocus="true"
      [value]="active"
      mode="md"
    >
      <ion-segment-button value="1">
        <ion-label>Overview</ion-label>
      </ion-segment-button>
      <ion-segment-button value="2">
        <ion-label>Shipments</ion-label>
      </ion-segment-button>
      <ion-segment-button value="3">
        <ion-label>Billable Shipments</ion-label>
      </ion-segment-button>
      <ion-segment-button value="4">
        <ion-label>Requests</ion-label>
      </ion-segment-button>
      <ion-segment-button value="5">
        <ion-label>Returns</ion-label>
      </ion-segment-button>
      <ion-segment-button value="6">
        <ion-label>Transfers</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</app-header>

<ion-content class="ion-padding">
  <ng-container [ngSwitch]="active">
    <ng-container *ngSwitchDefault>
      <app-inventory-table
        [value]="inventoryItems$"
        *ngIf="inventoryItems$ | async else loading"
        (selectedItem)="viewItem($event)"
        (editItem)="editItem($event)"
        (duplicateItem)="duplicateItem($event)"
      ></app-inventory-table>
      <ion-fab class="m-2" vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="addItem()">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </ng-container>
    <ng-container *ngSwitchCase="2">
      <ion-accordion-group
        mode="ios"
        class="rounded-lg overflow-hidden mb-5"
        [multiple]="true"
        [value]="['pending']"
      >
        <ion-accordion value="pending">
          <ion-item slot="header" color="light">
            <ion-label color="primary">Pending Shipments</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-shipment-table
              [value]="pendingShipments$"
              *ngIf="pendingShipments$ | async else loading"
              (selectedItem)="viewShipment($event)"
            ></app-shipment-table>
          </div>
        </ion-accordion>
        <ion-accordion value="sent">
          <ion-item slot="header" color="light">
            <ion-label color="success">Approved Shipments</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-shipment-table
              [value]="shipments$"
              *ngIf="shipments$ | async else loading"
              (selectedItem)="viewShipment($event)"
            ></app-shipment-table>
          </div>
        </ion-accordion>
      </ion-accordion-group>

      <ion-fab class="m-2" vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="addShipment()">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </ng-container>
    <div *ngSwitchCase="3">
      <app-billable-shipments-table
        [value]="billableShipments$"
        *ngIf="billableShipments$ | async else loading"
        (selectedItem)="viewBillableShipment($event)"
      ></app-billable-shipments-table>
    </div>
    <div *ngSwitchCase="4">
      <ion-accordion-group
        mode="ios"
        class="rounded-lg overflow-hidden"
        [multiple]="true"
        [value]="['pending']"
      >
        <ion-accordion value="pending">
          <ion-item slot="header" color="light">
            <ion-label color="primary">Pending Requests</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-requests-table
              [value]="submittedRequests$"
              *ngIf="submittedRequests$ | async else loading"
              (selectedItem)="viewRequest($event)"
            ></app-requests-table>
          </div>
        </ion-accordion>
        <ion-accordion value="partial">
          <ion-item slot="header" color="light">
            <ion-label color="tertiary">Partially Shipped Requests</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-requests-table
              [value]="partialRequests$"
              *ngIf="partialRequests$ | async else loading"
              (selectedItem)="viewRequest($event)"
            ></app-requests-table>
          </div>
        </ion-accordion>
        <ion-accordion value="approved">
          <ion-item slot="header" color="light">
            <ion-label color="success">Approved Requests</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-requests-table
              [value]="requests$"
              *ngIf="requests$ | async else loading"
              (selectedItem)="viewRequest($event)"
            ></app-requests-table>
          </div>
        </ion-accordion>
      </ion-accordion-group>
    </div>
    <ng-container *ngSwitchCase="5">
      <ion-accordion-group
        mode="ios"
        class="rounded-lg overflow-hidden"
        [multiple]="true"
        [value]="['pending']"
      >
        <ion-accordion value="pending">
          <ion-item slot="header" color="light">
            <ion-label color="primary">Pending Returns</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-returns-table
              [value]="submittedReturns$"
              *ngIf="submittedReturns$ | async else loading"
              (selectedItem)="viewReturn($event)"
            ></app-returns-table>
          </div>
        </ion-accordion>
        <ion-accordion value="approved">
          <ion-item slot="header" color="light">
            <ion-label color="success">Approved Returns</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-returns-table
              [value]="returns$"
              *ngIf="returns$ | async else loading"
              (selectedItem)="viewReturn($event)"
            ></app-returns-table>
          </div>
        </ion-accordion>
      </ion-accordion-group>
    </ng-container>
    <ng-container *ngSwitchCase="6">
      <ion-accordion-group
        mode="ios"
        class="rounded-lg overflow-hidden mb-5"
        [multiple]="true"
        [value]="['pending']"
      >
        <ion-accordion value="pending">
          <ion-item slot="header" color="light">
            <ion-label color="primary">Pending Transfers</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-transfer-table
              [value]="pendingTransfers$"
              *ngIf="pendingTransfers$ | async else loading"
              (selectedItem)="viewTransfer($event)"
            ></app-transfer-table>
          </div>
        </ion-accordion>
        <ion-accordion value="sent">
          <ion-item slot="header" color="light">
            <ion-label color="success">Approved Transfers</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <app-transfer-table
              [value]="transfers$"
              *ngIf="transfers$ | async else loading"
              (selectedItem)="viewTransfer($event)"
            ></app-transfer-table>
          </div>
        </ion-accordion>
      </ion-accordion-group>
      <ion-fab class="m-2" vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="addTransfer()">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </ng-container>
    <ng-template #loading>
      <div class="ion-padding">
        <app-skeleton-text></app-skeleton-text>
        <app-skeleton-text></app-skeleton-text>
        <app-skeleton-text></app-skeleton-text>
        <app-skeleton-text></app-skeleton-text>
      </div>
    </ng-template>
  </ng-container>
</ion-content>
