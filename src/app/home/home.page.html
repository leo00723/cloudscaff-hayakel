<ion-menu
  contentId="main-content"
  mode="md"
  type="overlay"
  *ngIf="user$ |async as user"
>
  <ion-content>
    <ion-item lines="none">
      <ion-avatar slot="start">
        <img
          [src]="user.thumb ? user.thumb : 'assets/icons/user.svg'"
          alt="image"
        />
      </ion-avatar>
      <ion-label>
        <h2 class="fw-bold">{{user.name}}</h2>
        <h3 class="text-muted">{{user.email}}</h3>
      </ion-label>
      <ion-icon
        class="cursor-pointer"
        slot="end"
        name="settings-outline"
        (click)="editProfile()"
      ></ion-icon>
    </ion-item>
    <ion-list id="inbox-list">
      <ion-menu-toggle
        auto-hide="false"
        *ngFor="let p of appPages; let i = index"
      >
        <ion-item
          routerDirection="root"
          [routerLink]="[p.url]"
          lines="none"
          detail="false"
          routerLinkActive="selected"
        >
          <ion-icon slot="start" [name]="p.icon"></ion-icon>
          <ion-label>{{ p.title }}</ion-label>
        </ion-item>
      </ion-menu-toggle>
    </ion-list>
    <ion-list id="labels-list">
      <ion-menu-toggle auto-hide="false">
        <ion-item
          routerDirection="root"
          routerLinkActive="selected"
          routerLink="/dashboard/settings"
          [replaceUrl]="true"
          lines="none"
          detail="false"
        >
          <ion-icon slot="start" name="settings-outline"></ion-icon>
          <ion-label>Settings</ion-label>
        </ion-item>
        <ion-item
          routerDirection="root"
          routerLink="/login"
          lines="none"
          (click)="logout()"
          detail="false"
        >
          <ion-icon slot="start" name="log-out-outline"></ion-icon>
          <ion-label>Logout</ion-label>
        </ion-item>
      </ion-menu-toggle>
    </ion-list>
    <ion-item lines="none">
      <ion-label class="ion-text-center">
        <ion-note>{{version}}</ion-note>
      </ion-label>
    </ion-item>
    <ion-progress-bar type="indeterminate" *ngIf="loading"></ion-progress-bar>
    <ion-item lines="none" detail="false" *ngIf="!loading">
      <ion-label class="ion-text-center">
        <ion-button shape="round" fill="clear" (click)="check()">
          check for updates
        </ion-button>
      </ion-label>
    </ion-item>
  </ion-content>
</ion-menu>

<ion-router-outlet id="main-content"></ion-router-outlet>
